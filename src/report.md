# Операционные системы UNIX/Linux (Базовый).

Установка и обновления системы Linux. Основы администрирования.

---

## Part 1. Установка ОС

- ![version_Ubuntu](images/version_Ubuntu.png)\
  версия Ubuntu

---

## Part 2. Создание пользователя

- ![create_user](images/create_user.png)\
  команда для создания пользователя

- ![output_user](images/output_user.png)\
  вывод команды `cat /etc/passwd`

---

## Part 3. Настройка сети ОС

- Для изменения названия машины использовала команду: \
`sudo hostnamectl set-hostname seftonca-1`. \
В файле `/etc/hosts` заменила старое имя новым. \
Убедилась, что в файле `/etc/hostname` также именилось имя. \
Перезапустила машину с помощью команды `sudo reboot`. \
Имя машины изменилось.

- Установка временной зоны, соответствующей текущему местоположению.\
Проверить настройки часового пояса: `timedatectl`\
Список доступных часовых поясов: `timedatectl list-timezones`\
Установить часовой пояс: `sudo timedatectl set-timezone Asia/Novosibirsk`

- Вывести список сетевых интерфейсов можно с помощью команд: 

  ![ifconfig](images/ifconfig.png)\

  или

  ![ifconfig](images/ip_link_show.png)\


- lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost.

- ![ip_address](images/ip_address.png)\
  получение ip адреса устройства

- DHCP - это клиент-серверный протокол динамической конфигурации хоста (Dynamic Host Configuration Protocol), с помощью которого в ИТ-инфраструктуре сетевые параметры каждого нового устройства прописываются автоматически. 

- ![ip](images/ip.png)\
  внешний ip-адрес шлюза (ip)

- ![gw](images/gw.png)\
  внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw)

- Задание статичных настроек ip, gw, dns:

  в каталоге `/etc/netplan/` создаем новый файл конфигурации `.yaml`:
  ![yaml](images/yaml.png)

  Для сохранения изменений выполняем команду `sudo netplan apply`.

- Проверка статичных сетевых настроек после перезагрузки машины:

  ![ip_static](images/ip_static.png)\
  статичный ip-адрес

  ![gw_static](images/gw_static.png)\
  статичный gw-адрес

- ![ping_1111](images/ping_1111.png)\
  пинг хоста 1.1.1.1

- ![ping_ya](images/ping_ya.png)\
  пинг хоста ya.ru

---

## Part 4. Обновление ОС

- После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют:

  ![ugrade_done](images/upgrade_done.png)\
  обновления отсутствуют

---

## Part 5. Использование команды **sudo**

- sudo (англ. superuser do, дословно «выполнить от имени суперпользователя») — программа для системного администрирования UNIX-систем, позволяющая делегировать те или иные привилегированные ресурсы пользователям с ведением протокола работы. Основная идея — дать пользователям как можно меньше прав, при этом достаточных для решения поставленных задач.
 
- ![new_host](images/new_host.png) \
  измененный hostname

---

## Part 6. Установка и настройка службы времени

- ![time](images/time.png)\
  установлено корректное время и настроена синхронизация

---

## Part 7. Установка и использование текстовых редакторов 

- Создание файла в трех текстовых редакторах:

  ![vim](images/vim.png) \
  редактоор `VIM` \
  для выхода из редактора с сохранением изменений нажимаем клавишу `Esc` и вводим с клавиатуры `:wq!`

  ![nano](images/nano.png) \
  редактоор `NANO` \
  для сохранения изменений нажимаем `Cntrl`+`O`, для выхода из редактора `Cntrl`+`X`.

  ![mcedit](images/mcedit.png) \
  редактоор `MCEDIT` \
  для выхода из редактора нажимаем `F10` и выбираем `YES` для подтверждения сохранения изменений.

- Редактирование файлов и закрытие без сохранения изменений:

  ![vim2](images/vim2.png) \
  редактоор `VIM` \
  для выхода из редактора без сохранениея изменений нажимаем клавишу `Esc` и вводим с клавиатуры `:q!`

  ![nano2](images/nano2.png) \
  редактоор `NANO` \
  для выхода из редактора нажимаем `Cntrl`+`X` и для отказа от сохранения именений `N`.

  ![mcedit2](images/mcedit2.png) \
  редактоор `MCEDIT` \
  для выхода из редактора нажимаем `F10` и выбираем `NO` для отказа от сохранения изменений.

- Редактирование файлов, использование функций поиска по файлу и замена слова:

  ![vim3](images/vim3.png) \
  результат поиска слова в редактооре `VIM` (символ `/` и слово)

  ![nano3](images/nano3.png) \
  результат поиска слова в редактооре `NANO` (курсор мигает в начале искомого слова, комбинация клавиш `Cntrl`+`W`)

  ![mcedit3](images/mcedit3.png) \
  результат поиска слова в редактооре `MCEDIT` (клавиша `F7`)

  ![vim4](images/vim4.png) \
  команда для замены слова в редактооре `VIM`

  ![nano4.1](images/nano4.1.png) \
  ![nano4.2](images/nano4.2.png) \
  ![nano4.3](images/nano4.3.png) \
  замена слова в редактооре `NANO` (комбинация клавиш `Cntrl`+`\`)

  ![mcedit4.1](images/mcedit4.1.png) \
  ![mcedit4.2](images/mcedit4.2.png) \
  замена слова в редактооре `MCEDIT` (клавиша `F4`)

---

## Part 8. Установка и базовая настройка сервиса **SSHD**

- Устанавливаем службу SSHd с помощью команды: `sudo apt-get install ssh`

- Добавляем пакет SSH-сервера в автозагрузку: `sudo systemctl enable sshd`

- Открываем конфигурационный файл в текстовом редакторе: `sudo vim /etc/ssh/sshd_config` и изменяем `порт 22` на значение `2022`.

- ![ps_sshd](images/ps_sshd.png)\
  результат команды `ps`\
  ключ `-С` выбирает процессы по имени команды \
  ключ `-F` показывает полную информацию о процессе

- Перезагружаем систему командой `sudo reboot`

- ![netstat](images/netstat.png)\
  вывод команды `netstat -tan` \
  флаг `-t` отображает текущее подключение в состоянии переноса нагрузки с процессора на сетевой адаптер при передаче данных ( "offload" ) \
  флаг `-a` отображает все подключения и ожидающие порты \
  флаг `-n` отображает адреса и номера портов в числовом формате

  Значения столбцов: \
  PROTO - название протокола; \
  Recv-Q -  количество полученных пакетов в очереди; \
  Send-Q - количество отправленных пакетов в очереди; \
  Local Address - локальный IP-адрес, участвующий в соединении или связанный со службой, ожидающей входящие соединения (слушающей порт). Если в качестве адреса отображается 0.0.0.0, то это означает - "любой адрес", т.е в соединении могут использоваться все IP-адреса существующие на данном компьютере; \
  Foreign Address - внешний IP-адрес, участвующий в создании соединения; \
  State - состояние соединения. Состояние Listening говорит о том, что строка состояния отображает информацию о сетевой службе, ожидающей входящие соединения по соответствующему протоколу на адрес и порт, отображаемые в колонке "Локальный адрес ".

---

## Part 9. Установка и использование утилит **top**, **htop**

- ![top](images/top.png)\
  вывод команды `top` 

  - uptime: 10 min; 
  - количество авторизованных пользователей: 1 user; 
  - общую загрузку системы: 0.10, 0.05, 0.02; 
  - общее количество процессов: 109; 
  - загрузку cpu: 99.8 id, 0.2 si; 
  - загрузку памяти: 976.7 total, 144.0 free, 195.7 used, 637.0 buff/cache; 
  - pid процесса занимающего больше всего памяти: 1;
  - pid процесса, занимающего больше всего процессорного времени: 1; 

- ![htop_pid](images/htop_pid.png)\
  вывод команды `htop`, отсортированный по `PID` \
- ![htop_cpu](images/htop_cpu.png)\
  вывод команды `htop`, отсортированный по `PERCENT_CPU` \
- ![htop_mem](images/htop_mem.png)\
  вывод команды `htop`, отсортированный по `PERCENT_MEM` \
- ![htop_time](images/htop_time.png)\
  вывод команды `htop`, отсортированный по `TIME` \
- ![htop_sshd](images/htop_sshd.png)\
  вывод команды `htop`, отфильтрованный для процесса `sshd` \
- ![htop_syslog](images/htop_syslog.png)\
  вывод команды `htop` с процессом `syslog` \
- ![htop_setup](images/htop_setup.png)\
  вывод команды `htop` с добавленным выводом `hostname`, `clock` и `uptime` \

---

## Part 10. Использование утилиты **fdisk**

- ![fdisk](images/fdisk.png)\
  Disk /dev/sda: 16 GiB, 17179869184 bytes, 33554432 sectors.

---

## Part 11. Использование утилиты **df** 

- ![df](images/df.png)\

  - размер раздела: 16400252;
  - размер занятого пространства: 6238684;
  - размер свободного пространства: 9306480;
  - процент использования: 41%.
- Единицы измерения: килобайты.

- ![df_Th](images/df_Th.png)\

    - размер раздела: 16 G;
    - размер занятого пространства: 6.0 G;
    - размер свободного пространства: 8.9 G;
    - процент использования: 41%.
- Тип файловой системы: ext4.

---

## Part 12. Использование утилиты **du**

- ![du](images/du.png)\
  вывод команды `du`

- ![du_home1](images/du_home1.png)\
  вывод размера папок в байтах в каталоге `/home`

- ![du_home2](images/du_home2.png)\
  вывод размера папок в удобном виде в каталоге `/home`

- ![du_var1](images/du_var1.png)\
  вывод размера папок в байтах в каталоге `/var`

- ![du_var2](images/du_var2.png)\
  вывод размера папок в удобном виде в каталоге `/var`

- ![du_varlog1](images/du_varlog1.png)\
  вывод размера папок в байтах в каталоге `/var`

- ![du_varlog2](images/du_varlog2.png)\
  вывод размера папок в удобном виде в каталоге `/var/log`

- ![du_varlog*1](images/du_varlog*1.png)\
  вывод размера всего содержимого папок в байтах в каталоге `/var/log`

- ![du_varlog*2](images/du_varlog*2.png)\
  вывод размера всего содержимого папок в удобном виде в каталоге `/var/log`

---

## Part 13. Установка и использование утилиты **ncdu**

- Установила утилиту ncdu с помощью команды: `sudo apt-get install ncdu`

- ![ncdu_home](images/ncdu_home.png)\
  вывод команды `ncdu /home`

- ![ncdu_var](images/ncdu_var.png)\
  вывод команды `ncdu /var`

- ![ncdu_varlog](images/ncdu_varlog.png)\
  вывод команды `ncdu /var/log`

---

## Part 14. Работа с системными журналами

- ![auth](images/auth.png)\
  время последней успешной авторизации, имя пользователя и метод входа в систему.

- ![restart_ssh](images/restart_ssh.png)\
  рестарт службы SSHd.

---

## Part 15. Использование планировщика заданий **CRON**

- ![syslog](images/syslog.png)\
  выполнение задания uptime.

- ![crontab_l](images/crontab_l.png)\
  список текущих заданий для CRON.

- ![crontab_r](images/crontab_r.png)\
  удаление всех заданий из планировщика и вывод списка текущих заданий.

